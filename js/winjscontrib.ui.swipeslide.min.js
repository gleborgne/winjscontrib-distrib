!function(){"use strict";WinJS.Namespace.define("WinJSContrib.UI",{SwipeSlide:WinJS.Class.mix(WinJS.Class.define(function(e,t){this.element=e||document.createElement("DIV"),t=t||{},this.threshold=t.threshold||40,this.direction=t.direction||"horizontal",this.element.winControl=this,this.element.classList.add("win-disposable"),this.target=this.element,WinJS.UI.setOptions(this,t),this.eventTracker=new WinJSContrib.UI.EventTracker,this.ptDown=null,this.registerEvents(),this.allowed={left:!0,right:!0},this.disabled=!1},{registerEvents:function(){void 0!==this.element.onpointerdown?(this.eventTracker.addEvent(this.element,"pointerdown",this._processDown.bind(this),!0),this.eventTracker.addEvent(this.element,"pointerup",this._processUp.bind(this),!0),this.eventTracker.addEvent(this.element,"pointermove",this._processMove.bind(this),!0)):void 0!==this.element.ontouchstart?(this.eventTracker.addEvent(this.element,"touchstart",this._processDown.bind(this),!0),this.eventTracker.addEvent(this.element,"touchend",this._processUp.bind(this),!0),this.eventTracker.addEvent(this.element,"touchcancel",this._processUp.bind(this),!0),this.eventTracker.addEvent(this.element,"touchmove",this._processMove.bind(this),!0)):(this.eventTracker.addEvent(this.element,"mousedown",this._processDown.bind(this),!0),this.eventTracker.addEvent(this.element,"mouseup",this._processUp.bind(this),!0),this.eventTracker.addEvent(this.element,"mouseleave",this._processUp.bind(this),!0),this.eventTracker.addEvent(this.element,"mousemove",this._processMove.bind(this),!0))},_processDown:function(e){this.disabled||(this.ptDown=e.changedTouches?{x:e.changedTouches[0].screenX,y:e.changedTouches[0].screenY,confirmed:!1}:{x:e.screenX,y:e.screenY,confirmed:!1})},_processUp:function(e){e.currentTarget||e.target;if(e.pointerId&&this.element.releasePointerCapture&&this.element.releasePointerCapture(e.pointerId),this.ptDown){if(e.changedTouches)var t=this.ptDown.x-e.changedTouches[0].screenX,s=this.ptDown.y-e.changedTouches[0].screenY;else var t=this.ptDown.x-e.screenX,s=this.ptDown.y-e.screenY;if(Math.abs(t)>this.element.clientWidth/6){var i={dX:t,dY:s,move:-t-this.threshold,direction:t>0?"left":"right",handled:!1};this.dispatchEvent("swipe",i),i.handled||this.setMove(0)}else this.setMove(0)}else this.setMove(0);this.ptDown=null},_processMove:function(e){if(!this.disabled&&this.ptDown){if(e.changedTouches)var t=this.ptDown.x-e.changedTouches[0].screenX,s=this.ptDown.y-e.changedTouches[0].screenY;else var t=this.ptDown.x-e.screenX,s=this.ptDown.y-e.screenY;if(Math.abs(t)>5&&Math.abs(t)>Math.abs(s)&&(e.preventDefault(),e.stopPropagation()),!this.ptDown.confirmed){if(Math.abs(s)>this.threshold)return void(this.ptDown=null);if(Math.abs(t)>this.threshold){this.ptDown.confirmed=!0;{e.currentTarget||e.target}e.pointerId&&this.element.setPointerCapture&&this.element.setPointerCapture(e.pointerId)}}this.ptDown.confirmed&&this.setMove((-t-this.threshold)/2)}},setMove:function(e){e>0&&!this.allowed.left?(e=Math.sqrt(e),e>this.element.clientWidth/6&&(e=this.element.clientWidth/6)):0>e&&!this.allowed.right&&(e=-Math.sqrt(-e),e<-(this.element.clientWidth/6)&&(e=-(this.element.clientWidth/6))),void 0!==this.target.style.webkitTransform?this.target.style.webkitTransform="translate3d("+e+"px, 0, 0)":this.target.style.transform="translate3d("+e+"px, 0, 0)"},dispose:function(){this.eventTracker.dispose();try{WinJS.Utilities.disposeSubTree(this.element)}catch(e){}}}),WinJS.UI.DOMEventMixin,WinJS.Utilities.createEventProperties("swipe"))})}();