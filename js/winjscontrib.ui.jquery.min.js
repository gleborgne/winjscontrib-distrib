/* 
 * WinJS Contrib v2.0.1.0
 * licensed under MIT license (see http://opensource.org/licenses/MIT)
 * sources available at https://github.com/gleborgne/winjscontrib
 */

function HSL(n,t,e){var i={h:n,s:t,l:e,addH:function(n){this.h=this.h+n},addS:function(n){this.s=this.s+n},addL:function(n){this.l=this.l+n},toString:function(){return"hsl("+this.h+","+this.s+"%, "+this.l+"%)"},clone:function(n,t,e){var i=new HSL(this.h,this.s,this.l);return i.addH(n),i.addS(t),i.addL(e),i}};return i}!function(n){n.fn.winControl=function(){return this[0].winControl}}(jQuery),function(n){function t(t){var e=t.currentTarget||t.target,i=e.mcnTapTracking;if(i&&(void 0===t.button||0===t.button||i.allowRickClickTap&&2===t.button)){i.lock&&(t.pointerId&&t.currentTarget.setPointerCapture&&t.currentTarget.setPointerCapture(t.pointerId),t.preventDefault());var a=n(t.currentTarget);a.addClass("tapped"),i.pointerdown=t.changedTouches?{x:t.changedTouches[0].clientX,y:t.changedTouches[0].clientY}:{x:t.clientX,y:t.clientY},i.animDown(t.currentTarget),i.tapOnDown&&i.callback(e)}}function e(t){var e=t.currentTarget||t.target,i=e.mcnTapTracking;if(i&&i.pointerdown){var a=n(e);a.removeClass("tapped"),t.pointerId&&e.releasePointerCapture&&e.releasePointerCapture(t.pointerId),i.disableAnimation||i.animUp(t.currentTarget)}}function i(t){var e=t.currentTarget||t.target,i=e.mcnTapTracking;if(i&&(void 0===t.button||0===t.button||i.allowRickClickTap&&2===t.button)){var a=n(e);if(e.releasePointerCapture&&e.releasePointerCapture(t.pointerId),i&&!i.tapOnDown){t.stopPropagation();var r=function(){if(i&&i.pointerdown){if(t.changedTouches)var n=Math.abs(i.pointerdown.x-t.changedTouches[0].clientX),a=Math.abs(i.pointerdown.y-t.changedTouches[0].clientY);else var n=Math.abs(i.pointerdown.x-t.clientX),a=Math.abs(i.pointerdown.y-t.clientY);i.callback&&15>n&&15>a&&(t.stopImmediatePropagation(),t.stopPropagation(),t.preventDefault(),i.callback(e)),i&&i.pointerdown&&(i.pointerdown=void 0)}};i.awaitAnim?i.animUp(e).done(r):(i.animUp(e),r())}a.removeClass("tapped")}}n.fn.tap=function(a,r){var o=r||{};return this.each(function(){var r=n(this);r.addClass("tap"),this.mcnTapTracking&&this.mcnTapTracking.dispose(),this.mcnTapTracking=this.mcnTapTracking||{},this.mcnTapTracking.eventTracker=new WinJSContrib.UI.EventTracker,this.mcnTapTracking.disableAnimation=o.disableAnimation,this.mcnTapTracking.disableAnimation?(this.mcnTapTracking.animDown=function(){return WinJS.Promise.wrap()},this.mcnTapTracking.animUp=function(){return WinJS.Promise.wrap()}):(this.mcnTapTracking.animDown=o.animDown||WinJS.UI.Animation.pointerDown,this.mcnTapTracking.animUp=o.animUp||WinJS.UI.Animation.pointerUp),this.mcnTapTracking.element=this,this.mcnTapTracking.callback=a,this.mcnTapTracking.lock=o.lock,this.mcnTapTracking.awaitAnim=o.awaitAnim||!1,this.mcnTapTracking.disableAnimation=o.disableAnimation,this.mcnTapTracking.tapOnDown=o.tapOnDown,this.mcnTapTracking.pointerModel="none",this.mcnTapTracking.dispose=function(){this.element.classList.remove("tap"),this.eventTracker.dispose(),this.element.mcnTapTracking=null,this.element=null},void 0!==this.onpointerdown?(this.mcnTapTracking.pointerModel="pointers",this.mcnTapTracking.eventTracker.addEvent(this,"pointerdown",t),this.mcnTapTracking.eventTracker.addEvent(this,"pointerout",e),this.mcnTapTracking.eventTracker.addEvent(this,"pointerup",i)):window.Touch&&!o.noWebkitTouch?(this.mcnTapTracking.pointerModel="touch",this.mcnTapTracking.eventTracker.addEvent(this,"touchstart",t),this.mcnTapTracking.eventTracker.addEvent(this,"touchcancel",e),this.mcnTapTracking.eventTracker.addEvent(this,"touchend",i)):(this.mcnTapTracking.pointerModel="mouse",this.mcnTapTracking.eventTracker.addEvent(this,"mousedown",t),this.mcnTapTracking.eventTracker.addEvent(this,"mouseleave",e),this.mcnTapTracking.eventTracker.addEvent(this,"mouseup",i))})},n.fn.untap=function(){return this.each(function(){n(this);this.mcnTapTracking&&this.mcnTapTracking.dispose()})},jQuery.fn.hatchShow=function(){n(".hsjs").css("visibility","hidden").css("font-size","").css("display","inner-block").css("white-space","pre").each(function(){var t=n(this),e=t.parent();e.hasClass("hatchshow_temp")?e=e.parent():t.wrap("<span class='hatchshow_temp' style='display:block'>");var i=e.width();for(t.width();t.width()<i;){var a=t.fontSize();if(a>200)break;t.css("font-size",a+1+"px"),function(){for(;t.width()>i;){var n=t.fontSize();if(8>n)break;t.css("font-size",n-.1+"px")}}}}).hide().css("visibility","").fadeIn()},jQuery.fn.fontSize=function(){return parseInt(n(this).css("font-size").replace("px",""))}}(jQuery),function(n){n.fn.pressEnterDefaultTo=function(t,e){return this.each(function(){var i=n(this);i.keypress(function(i){var a=i.which?i.which:i.keyCode;if(13==a){var r=e?n(t,e):n(t);jQuery(this).blur(),i.preventDefault(),i.stopPropagation(),r[0].mcnTapTracking&&r[0].mcnTapTracking.callback&&r[0].mcnTapTracking.callback(r[0]),r.focus().click()}})})},n.fn.onPressEnter=function(t){return this.each(function(){var e=n(this);e.keypress(function(n){var e=n.which?n.which:n.keyCode;13==e&&(jQuery(this).blur(),n.preventDefault(),t&&t())})})},n.fn.throttleTextChanged=function(t,e){return this.each(function(){var i=this,a=n(this),r=i.value;a.keydown(function(){clearTimeout(i.mcnTxtThrottling),i.mcnTxtThrottling=setTimeout(function(){r=i.value,e(i,i.value)},t)}),a.blur(function(){r!=i.value&&(r=i.value,e(i,i.value))})})}}(jQuery),function(n){n.fn.transitionProperties=function(t,e,i){var a=n(this);return new WinJS.Promise(function(n,r){var o=t+" "+e+"ms ease-out",c=a.css("transition",o);i&&i(c),c.delay(e+10).promise().done(function(){a.css("-ms-transition",""),n(c)},function(){a.css("-ms-transition",""),r(c)})})}}(jQuery),function(n){n.fn.toWinJSPromise=function(){return new WinJS.Promise(function(n,t){var e=this.promise().done(function(){n(e)},function(){t(e)})})}}(jQuery),function(n){n.fn.renderWith=function(t,e){var i=n(t).get(0);return i&&(i=i.winControl),this.each(function(){var t=n(this);i&&i.render(null,e).done(function(n){t.append(n.children[0])})})}}(jQuery),function(n){n.fn.renderWithEach=function(t,e,i){var a=n(t).get(0);return a&&(a=a.winControl),this.each(function(){var t=n(this);a&&e.forEach(function(n){a.render(null,n).done(function(e){var a=e.children[0];t.append(a),i&&i(n,a)})})})}}(jQuery),function(n){n.fn.scrollInView=function(t){var e=Windows.UI.ViewManagement.ApplicationView.value,i=!0;return(e===Windows.UI.ViewManagement.ApplicationViewState.snapped||e===Windows.UI.ViewManagement.ApplicationViewState.fullScreenPortrait)&&(i=!1),this.each(function(){n(this);i?this.offsetParent.scrollLeft=this.offsetLeft-(t?t:0):this.offsetParent.scrollTop=this.offsetTop-(t?t:0)})}}(jQuery),function(n){n.fn.scrollInParentView=function(n){var t=Windows.UI.ViewManagement.ApplicationView.value,e=!0;return(t===Windows.UI.ViewManagement.ApplicationViewState.snapped||t===Windows.UI.ViewManagement.ApplicationViewState.fullScreenPortrait)&&(e=!1),this.each(function(){e?this.offsetParent.offsetParent.scrollLeft=this.offsetLeft-(n?n:0):this.offsetParent.offsetParent.scrollTop=this.offsetTop-(n?n:0)})}}(jQuery),function(n){n.fn.loadedPromises=function(t){var e=[];return this.each(function(){var i=(n(this),this),a=new WinJS.Promise(function(n,e){function a(n){i.removeEventListener("error",a),i.removeEventListener("load",r),e({message:"element not loaded",elt:n.currentTarget})}function r(){i.removeEventListener("error",a),i.removeEventListener("load",r),n(i),t&&t(i)}i.addEventListener("error",a),i.addEventListener("load",r,!1),i.naturalWidth>0&&r()});e.push(a)}),e},n.fn.whenLoaded=function(n){var t=this.loadedPromises();return n?void WinJS.Promise.join(t).done(function(t){n(t)}):WinJS.Promise.join(t)},n.fn.afterTransition=function(n,t){var e=[],i=!1;this.each(function(){var n=this,i=new WinJS.Promise(function(e){var i=function(t){t.srcElement===n&&a()},a=function(){clearTimeout(timeOutRef),n.removeEventListener("transitionend",i,!1),e()};n.addEventListener("transitionend",i,!1),timeOutRef=setTimeout(a,t||1e3)});e.push(i)});var a=null,r=null,o=new WinJS.Promise(function(n,t){a=n,r=t}),c=WinJS.Promise.join(e);return c.done(function(){return i?(c.cancel(),void r()):(i=!0,n&&n(),void a())},r),o},n.fn.afterAnimation=function(n){var t=[];return this.each(function(){var n=this,e=new WinJS.Promise(function(t){function e(i){i.srcElement===currentElement&&(n.removeEventListener("animationend",e),t())}n.addEventListener("animationend",e)});t.push(e)}),WinJS.Promise.join(t).done(function(){n&&n()}),this},n.fn.classBasedAnimation=function(t){return this.each(function(){var e=this;n(e).afterAnimation(function(){n(e).removeClass(t)}),n(e).addClass(t)})}}(jQuery);