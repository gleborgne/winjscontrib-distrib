Object.map||(Object.map=function(n,t){var e={};return"object"!=typeof n?e:("function"!=typeof t&&(t=function(n,t){return[n,t]}),Object.keys(n).forEach(function(i){var r=t.apply(n,[i,n[i]]);r&&r.length&&(e[r[0]||i]=r[1])}),e)}),String.prototype.format||(String.prototype.format=function(){var n=arguments;return this.replace(/{(\d+)}/g,function(t,e){return"undefined"!=typeof n[e]?n[e]:t})}),String.prototype.padLeft||(String.prototype.padLeft=function(n,t){return void 0===t&&(t="0"),this.length<n?(t+this).padLeft(n,t):this});var WinJSContrib=WinJSContrib||{};WinJSContrib.UI=WinJSContrib.UI||{},WinJSContrib.Utils=WinJSContrib.Utils||{},WinJSContrib.Promise=WinJSContrib.Promise||{},function(){"use strict";function n(n,t){if(n){if("this"===t)return n;var e=n[t];if("undefined"!=typeof e)return e;var i=t.indexOf("[");if(!(0>i)){var r=t.indexOf("]",i);if(!(0>r)){var o=t.substr(i+1,r-i);return o=parseInt(o),n[o]}}}}function t(n,t,e){if(WinJSContrib.Utils.hasValue(t))return n.setProperty?void n.setProperty(t,e):void(n[t]=e);if("string"==typeof t){var i=t.indexOf("[");if(0>i)return;var r=t.indexOf("]",i);if(0>r)return;var o=t.substr(i+1,r-i);o=parseInt(o),n[o]=e}}function e(n){var t=[],e=n.querySelectorAll(".mcn-layout-ctrl");if(e&&e.length)for(var i=0;i<e.length;i++){var r=e[i].winControl;r&&t.push(r)}return t}function i(n,t,e){var i=[];if(t&&t.length)for(var r=0;r<t.length;r++){var o=t[r];o.prepare&&i.push(WinJS.Promise.as(o.prepare(n.element,e)))}n&&n.prepare&&i.push(WinJS.Promise.as(n.prepare(n.element,e)));var a=WinJS.Promise.join(i);return n.addPromise(a),a}function r(n,t,e){var i=WinJS.Promise.wrap(),r=[];if(t&&t.length){for(var o=0;o<t.length;o++){var a=t[o];a.pageLayout&&r.push(WinJS.Promise.as(a.pageLayout(n.element,e)))}i=WinJS.Promise.join(r)}if(n&&n.layoutPage){var s=WinJS.Promise.as(n.layoutPage(n.element,e));i=r.length?i.then(function(){return s}):s}return n.addPromise(i),i}function o(n,t,e,i){if(n&&n.contentReady&&n.contentReady(n.element,e),t&&t.length)for(var r=0;r<t.length;r++){var o=t[r];o.contentReady&&o.contentReady(n.element,e)}if(n.enterPageAnimation)return WinJS.Promise.as(n.enterPageAnimation());if(n.element.style.opacity="",i.enterPage){var a=null;if(a=n&&n.getAnimationElements?n.getAnimationElements(!1):n.element)return i.enterPage(a)}}function a(n,t,e){if(n&&n.pageReady&&n.pageReady(n.element,e),t&&t.length)for(var i=0;i<t.length;i++){var r=t[i];r.pageReady&&r.pageReady(n.element,e)}}WinJSContrib.UI.offsetFrom=function(n,t){for(var e=0,i=0,r=n.clientWidth,o=n.clientHeight;n&&n!=t;)e+=n.offsetLeft-n.scrollLeft+n.clientLeft,i+=n.offsetTop-n.scrollTop+n.clientTop,n=n.offsetParent;return{x:e,y:i,width:r,height:o}},WinJSContrib.UI.EventTracker=function(){this.events=[]},WinJSContrib.UI.EventTracker.prototype.addEvent=function(n,t,e,i){n.addEventListener(t,e,i);var r=function(){try{n.removeEventListener(t,e)}catch(i){}};return this.events.push(r),r},WinJSContrib.UI.EventTracker.prototype.addBinding=function(n,t,e){n.bind(t,e);var i=function(){n.unbind(t,e)};return this.events.push(i),i},WinJSContrib.UI.EventTracker.prototype.dispose=function(){for(var n=0;n<this.events.length;n++)this.events[n]();this.events=[]},WinJSContrib.UI.appbarsOpen=function(){var n=document.querySelectorAll('div[data-win-control="WinJS.UI.AppBar"],div[data-win-control="WinJS.UI.NavBar"]');if(n&&n.length)for(var t=0;t<n.length;t++)n[t].winControl&&n[t].winControl.show()},WinJSContrib.UI.appbarsClose=function(){var n=document.querySelectorAll('div[data-win-control="WinJS.UI.AppBar"],div[data-win-control="WinJS.UI.NavBar"]');if(n&&n.length)for(var t=0;t<n.length;t++)n[t].winControl&&n[t].winControl.hide()},WinJSContrib.UI.appbarsDisable=function(){var n=document.querySelectorAll('div[data-win-control="WinJS.UI.AppBar"],div[data-win-control="WinJS.UI.NavBar"]');if(n&&n.length)for(var t=0;t<n.length;t++)n[t].winControl&&(n[t].winControl.disabled=!0)},WinJSContrib.UI.appbarsEnable=function(){$('div[data-win-control="WinJS.UI.AppBar"],div[data-win-control="WinJS.UI.NavBar"]').each(function(){this.winControl&&(this.winControl.disabled=!1)})},WinJSContrib.UI.elementLoaded=function(n,t){return new WinJS.Promise(function(e,i){function r(){n.onload=void 0,n.onerror=void 0,n.onreadystatechange=void 0,i("element not loaded")}function o(){n.onload=void 0,n.onerror=void 0,n.onreadystatechange=void 0,e({element:n,url:t})}n.onerror=r,n.onload=o,n.onreadystatechange=o,n.naturalWidth>0&&o(void 0),n.src=t})},WinJSContrib.UI.loadImage=function(n){return new WinJS.Promise(function(t,e){function i(){o.onload=void 0,o.onerror=void 0,e("image not loaded")}function r(){o.onload=void 0,o.onerror=void 0,t({element:o,url:n})}var o=new Image;o.onerror=i,o.onload=r,o.naturalWidth>0&&r(void 0),o.src=n})},WinJSContrib.UI.listElementsAfterMe=function(n){var t=[],e=!1;if(n.parentElement)for(var i=n.parentElement,r=0;r<i.children.length;r++)i.children[r]===n?e=!0:e&&t.push(i.children[r]);return t},WinJSContrib.UI.removeElementAnimation=function(n){return new WinJS.Promise(function(t){var e=WinJSContrib.UI.listElementsAfterMe(n),i=WinJS.UI.Animation.createDeleteFromListAnimation([n],e);n.style.position="fixed",n.style.opacity="0",i.execute().done(function(){t(n)})})},WinJSContrib.UI.bindPageActions=function(n,t){$("*[data-page-action]",n).each(function(){var n=$(this).addClass("page-action").data("page-action"),e=t[n];e&&"function"==typeof e&&$(this).tap(function(e){var i=$(e).data("page-action-args");if(i&&"string"==typeof i)try{var r=WinJSContrib.Utils.readValue(e,i);i=r?r:JSON.parse(i)}catch(o){return}t[n].bind(t)({elt:e,args:i})})})},WinJSContrib.UI.bindPageLinks=function(n){$("*[data-page-link]",n).each(function(){var n=$(this).addClass("page-link").data("page-link");if(n&&n.indexOf("/")<0){var t=WinJSContrib.Utils.readProperty(window,n);t&&(n=t)}n&&$(this).tap(function(t){var e=$(t).data("page-action-args");if(e&&"string"==typeof e)try{var i=WinJSContrib.Utils.readValue(t,e);e=i?i:JSON.parse(e)}catch(r){return}if(WinJSContrib.UI.parentNavigator&&WinJSContrib.UI.parentNavigator(t)){var o=WinJSContrib.UI.parentNavigator(t);o.navigate(n,e)}else WinJS.Navigation.navigate(n,e)})})},WinJSContrib.UI.bindMembers=function(n,t){$("*[data-page-member]",n).each(function(){var n=$(this).addClass("page-member").data("page-member");n||(n=this.id),n&&!t[n]&&(t[n]=this,this.winControl&&(t[n]=this.winControl))})},WinJSContrib.UI.bindActions=function(n,t){WinJSContrib.UI.bindPageActions(n,t),WinJSContrib.UI.bindPageLinks(n)},WinJSContrib.Promise.waterfall=function(n,t){var e=WinJS.Promise.wrap(),i=[];if(!n)return WinJS.Promise.wrap([]);var r=WinJS.Promise.as(n);return r.then(function(n){for(var r=function(n,e){return n.then(function(){return WinJS.Promise.as(t(e)).then(function(n){i.push(n)})})},o=0,a=n.length;a>o;o++)e=r(e,n[o]);return e.then(function(){return i})})},WinJSContrib.Promise.promises=function(n,t){if(!n)return WinJS.Promise.wrap([]);var e=WinJS.Promise.as(n);return e.then(function(n){for(var e=[],i=0,r=n.length;r>i;i++)e.push(WinJS.Promise.as(t(n[i])));return e})},WinJSContrib.Promise.parallel=function(n,t){if(!n)return WinJS.Promise.wrap([]);var e=WinJS.Promise.as(n);return e.then(function(n){for(var e=[],i=0,r=n.length;r>i;i++)e.push(WinJS.Promise.as(t(n[i])));return WinJS.Promise.join(e)})},WinJSContrib.Promise.batch=function(n,t,e){if(!n)return WinJS.Promise.wrap([]);var i=WinJS.Promise.as(n);return i.then(function(n){for(var i=WinJS.Promise.wrap(),r=[],o=[],a=!1,s=function(n,t){return n.then(function(){return WinJS.Promise.join(t.map(function(n){return WinJS.Promise.as(e(n))})).then(function(n){n=n.concat(n)},function(n){o=o.concat(n),a=!0})})},c=0,u=n.length;u>c;c++)r.push(n[c]),c>0&&c%t==0&&(i=s(i,r),r=[]);return r.length&&(i=s(i,r)),i.then(function(){return a?WinJS.Promise.wrapError(o):o})})},WinJSContrib.Utils.startsWith=function(n,t){if(!t)return!1;var e=n.match("^"+t)==t;return e},String.prototype.startsWith||(String.prototype.startsWith=function(n){return WinJSContrib.Utils.startsWith(this,n)}),WinJSContrib.Utils.endsWith=function(n,t){return t?n.match(t+"$")==t:!1},String.prototype.endsWith||(String.prototype.endsWith=function(n){return WinJSContrib.Utils.endsWith(this,n)}),WinJSContrib.Utils.queryStringFrom=function(n){var t=[];for(var e in n)n.hasOwnProperty(e)&&t.push(encodeURIComponent(e)+"="+encodeURIComponent(n[e]));return t.join("&")},WinJSContrib.Utils.triggerEvent=function(n,t,e,i){var r=document.createEvent("Event");r.initEvent(t,e,i),n.dispatchEvent(r)},WinJSContrib.Utils.triggerCustomEvent=function(n,t,e,i,r){var o=document.createEvent("CustomEvent");o.initCustomEvent(t,e,i,r),n.dispatchEvent(o)},WinJSContrib.Utils.readProperty=function(n,t){if("string"==typeof t&&n[t])return n[t];if(!t||!t.length)return n;var e=WinJSContrib.Utils.getProperty(n,t);return e?e.propValue:void 0},WinJSContrib.Utils.getProperty=function(e,i){"string"==typeof i&&(i=i.split(".")),i&&i.length||(i=["this"]);for(var r=e,o=null,a=0;a<i.length;a++){var s={parent:r,parentDescriptor:o,keyProp:i[a],ensureParent:function(){return r?r:void(this.parentDescriptor&&(this.parentDescriptor.ensureParent(),this.parentDescriptor.parent[this.parentDescriptor.keyProp]||(this.parentDescriptor.parent[this.parentDescriptor.keyProp]={},this.parent=this.parentDescriptor.parent[this.parentDescriptor.keyProp])))},get propValue(){return n(this.parent,this.keyProp)},set propValue(n){return this.ensureParent(),t(this.parent,this.keyProp,n)}};if(o=s,a==i.length-1)return s;r=n(r,i[a])}},WinJSContrib.Utils.writeProperty=function(n,t,e){var i=WinJSContrib.Utils.getProperty(n,t);i&&(i.propValue=e)},WinJSContrib.Utils.randomFromInterval=function(n,t){return Math.random()*(t-n+1)+n<<0},WinJSContrib.Utils.alphabeticSort=function(n,t){return n>t?1:t>n?-1:0},WinJSContrib.Utils.distinctArray=function(n,t,e){if(null==n||0==n.length)return n;"undefined"==typeof e&&(e=!1);var i="",r=0,o=[];if(e)for(var a=0;a<n.length;a++){if(t){var s=WinJSContrib.Utils.readProperty(n[a],t.split(".")),c=s;s||(c=s),s&&s.toLowerCase&&(c=s.toLowerCase())}else var c=n[a];i.indexOf("|"+c+"|")<0&&(i+="|"+c+"|",o[r++]=n[a])}else for(var a=0;a<n.length;a++){if(t)var c=WinJSContrib.Utils.readProperty(n[a],t.split("."));else var c=n[a];i.indexOf("|"+c+"|")<0&&(i+="|"+c+"|",o[r++]=n[a])}return o},WinJSContrib.Utils.getDistinctPropertyValues=function(n,t,e){return Utils.distinctArray(n,t,e).map(function(n){return WinJSContrib.Utils.readProperty(n,t.split("."))})},WinJSContrib.Utils.removeAccents=function(n){var t=n.toLowerCase();return t=t.replace(new RegExp("[àáâãäå]","g"),"a"),t=t.replace(new RegExp("æ","g"),"ae"),t=t.replace(new RegExp("ç","g"),"c"),t=t.replace(new RegExp("[èéêë]","g"),"e"),t=t.replace(new RegExp("[ìíîï]","g"),"i"),t=t.replace(new RegExp("ñ","g"),"n"),t=t.replace(new RegExp("[òóôõö]","g"),"o"),t=t.replace(new RegExp("œ","g"),"oe"),t=t.replace(new RegExp("[ùúûü]","g"),"u"),t=t.replace(new RegExp("[ýÿ]","g"),"y")},WinJSContrib.Utils.removePageFromHistory=function(n){var t=[];WinJS.Navigation.history&&WinJS.Navigation.history.backStack&&WinJS.Navigation.history.backStack.length&&WinJS.Navigation.history.backStack.forEach(function(e){e.location!==n&&t.push(e)}),WinJS.Navigation.history.backStack=t},WinJSContrib.Utils.pad2=function(n){return(10>n?"0":"")+n},WinJSContrib.Utils.ellipsisizeString=function(n,t,e){if(!n)return"";var i=n.length>t,r=i?n.substr(0,t-1):n;return r=e&&i?r.substr(0,r.lastIndexOf(" ")):r,i?r+"...":r},WinJSContrib.Utils.guid=function(){var n=(new Date).getTime(),t="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var e=(n+16*Math.random())%16|0;return n=Math.floor(n/16),("x"==t?e:7&e|8).toString(16)});return t},WinJSContrib.Utils.inherit=function(n,t){if(n&&n.parentElement)for(var e=n.parentElement;e;){if(e.winControl&&void 0!=e.winControl[t])return e.winControl[t];e=e.parentElement}},WinJSContrib.Utils.moveChilds=function(n,t){for(var e=[],i=0;i<n.children.length;i++)e.push(n.children[i]);e.forEach(function(n){t.appendChild(n)})},WinJSContrib.Utils.getParent=function(n,t){for(var e=t.parentNode;e;){if(e[n]&&e.winControl)return e.winControl;e=e.parentNode}},WinJSContrib.Utils.getParentControlByClass=function(n,t){for(var e=t.parentNode;e;){if(e.classList&&e.classList.contains(n)&&e.winControl)return e.winControl;e=e.parentNode}},WinJSContrib.Utils.getParentPage=function(n){return WinJSContrib.Utils.getParent("mcnPage",n)},WinJSContrib.Utils.getScopeControl=function(n){for(var t=n.parentNode;t;){if(t.msParentSelectorScope){var e=t.parentNode;if(e){var i=e.winControl;if(i)return i}}t=t.parentNode}},WinJSContrib.Utils.getTemplate=function(n){if(n){var t=typeof n;if("string"==t)return new WinJS.Binding.Template(null,{href:n});if("function"==t)return{render:function(t,e){var i=n(t,e);return WinJS.Promise.as(i)}};if(n.winControl)return n.winControl;if(n.render)return n}},WinJSContrib.Utils.resolveMethod=function(n,t){var e=WinJSContrib.Utils.resolveValue(n,t);return e&&"function"==typeof e?e:void 0},WinJSContrib.Utils.readValue=function(n,t){var e=WinJSContrib.Utils.resolveValue(n,t);return e?"function"==typeof e?e(n):e:void 0},WinJSContrib.Utils.resolveValue=function(n,t){var e,i,r;if(0==t.indexOf("page:")){if(e=t.substr(5),WinJSContrib.Utils.getParentPage&&(i=WinJSContrib.Utils.getParentPage(n)),!i&&WinJSContrib.UI.Application.navigator&&(i=WinJSContrib.UI.Application.navigator.pageControl),!i)return;r=WinJSContrib.Utils.readProperty(i,e),r&&"function"==typeof r&&(r=r.bind(i))}else 0==t.indexOf("ctrl:")?(e=t.substr(5),i=WinJSContrib.Utils.getScopeControl(n),r=WinJSContrib.Utils.readProperty(i,e),r&&"function"==typeof r&&(r=r.bind(i))):(e=t,i=WinJSContrib.Utils.getScopeControl(n),r=WinJSContrib.Utils.readProperty(window,e));return r},WinJSContrib.Utils.hasValue=function(n){return"undefined"!=typeof n&&null!==n},WinJSContrib.Utils.formatXHRError=function(n){return"{0} - {1}: {2}".format(n.status,n.statusText,n.responseText)},WinJSContrib.Utils.unwrapJoinError=function(n){return function(t){for(var e=null,i=0;i<t.length;i++){var r=t[i];if("undefined"!=typeof r){e=r;break}}return n(e)}},WinJSContrib.Utils.inject=function(n,t){if(t)for(var e in t)n[e]=t[e]},WinJSContrib.UI.addFragmentProperties=function(n){n.$=function(t){return $(t,n.element||n._element)},n.q=function(t){return n.element.querySelector(t)},n.qAll=function(t){var e=n.element.querySelectorAll(t);e&&!e.forEach&&(e.forEach=function(n){for(var t=0;t<e.length;t++)n(e[t],t)})};var t=n.dispose;n.dispose=function(){n.eventTracker.dispose(),t&&t.bind(n)()},n.eventTracker||(n.eventTracker=new WinJSContrib.UI.EventTracker),n.promises||(n.promises=[]),n.addPromise||(n.addPromise=function(n){this.promises.push(n)}),n.cancelPromises||(n.cancelPromises=function(){var n=this;if(n.promises)for(var t=0;t<n.promises.length;t++)n.promises[t]&&n.promises[t].cancel()})},WinJSContrib.UI.renderFragment=function(n,t,s,c){var u;c=c||{};var l=document.createElement("div");l.setAttribute("dir",window.getComputedStyle(l,null).direction),l.style.opacity="0";var f=new WinJS.Promise(function(n){u=n}),p=null,d=[];return WinJS.UI.Pages.render(t,l,s,f).then(function(){return l.winControl&&(p=l.winControl,p.navigationState={location:t,state:s},WinJSContrib.UI.addFragmentProperties(p),s&&s.injectToPage&&WinJSContrib.Utils.inject(p,s.injectToPage),c.onfragmentinit&&c.onfragmentinit(p),p.prepareData&&(p.dataPromise=WinJS.Promise.as(p.prepareData(l,s)),p.promises.push(p.dataPromise))),WinJS.Promise.timeout(10)}).then(function(){return WinJS.Resources.processAll(l)}).then(function(){return p.dataPromise}).then(function(){return c.closeOldPagePromise?WinJS.Promise.as(c.closeOldPagePromise):void 0}).then(function(n){return p.pagedata=n,WinJSContrib.UI.bindMembers(p.element,p),d=e(l),i(p,d,s,c)}).then(function(){return n.appendChild(l),WinJS.Promise.timeout()}).then(function(){return c.onafterlayout&&c.onafterlayout(p),d=e(l),r(p,d,s,c)}).then(function(){return u(),WinJSContrib.UI.bindActions(p.element,p),c.onafterready&&c.onafterready(p),d=e(l),o(p,d,s,c)}).then(function(){return a(p,d,s,c)})},WinJSContrib.UI.MediaTrigger=WinJS.Class.mix(WinJS.Class.define(function(n,t){var e=this;e.queries=[],e.linkedControl=t;for(var i in n){var r=n[i];r.query&&e.registerMediaEvent(i,r.query,r)}},{dispose:function(){this.queries.forEach(function(n){n.dispose()})},registerMediaEvent:function(n,t,e){var i=this,r=window.matchMedia(t),t={name:n,query:t,data:e,mq:r},o=function(n){n.matches&&i._mediaEvent(n,t)};r.addListener(o),t.dispose=function(){r.removeListener(o)},i.queries.push(t)},_mediaEvent:function(n,t){var e=this;e.linkedControl&&WinJS.UI.setOptions(e.linkedControl,t.data),e.dispatchEvent("media",t)},check:function(){var n=this;n.queries.forEach(function(t){var e=window.matchMedia(t.query);e.matches&&n._mediaEvent({matches:!0},t)})}}),WinJS.Utilities.eventMixin),WinJSContrib.UI.registerNavigationEvents=function(n,t){function e(n){var t=new WinJS.Promise(function(){});n.detail.setPromise(t),t.cancel()}var i=n,r=[];n.navLocks=n.navLocks||[],n.navLocks.isActive=!0;for(var o=function(e){n.navLocks&&0!=n.navLocks.length||t.bind(n)(e)},a=document.querySelectorAll(".mcn-navigation-ctrl"),s=0;s<a.length;s++){var i=a[s].winControl;i&&i!=n&&(i.navLocks=i.navLocks||[],i.navLocks.isActive&&(!i.navLocks.length||i.navLocks.indexOf(n)<0)&&(i.navLocks.push(n),r.push(i)))}return WinJS.Navigation.addEventListener("beforenavigate",e),window.Windows&&window.Windows.Phone?Windows.Phone.UI.Input.HardwareButtons.addEventListener("backpressed",o):document.addEventListener("backbutton",o),WinJSContrib.UI.Application&&WinJSContrib.UI.Application.navigator&&WinJSContrib.UI.Application.navigator.addLock(),function(){WinJSContrib.UI.Application&&WinJSContrib.UI.Application.navigator&&WinJSContrib.UI.Application.navigator.removeLock(),n.navLocks.isActive=!1,r.forEach(function(t){var e=t.navLocks.indexOf(n);e>=0&&t.navLocks.splice(e,1)}),WinJS.Navigation.removeEventListener("beforenavigate",e),window.Windows&&window.Windows.Phone?Windows.Phone.UI.Input.HardwareButtons.removeEventListener("backpressed",o):document.removeEventListener("backbutton",o)}}}(WinJSContrib);