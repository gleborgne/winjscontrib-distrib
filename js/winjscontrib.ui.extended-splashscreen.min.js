!function(){"use strict";WinJS.Navigation;WinJS.Namespace.define("WinJSContrib.UI",{ExtendedSplash:WinJS.Class.define(function(e,s){var i=this;s=s||{},i.element=e||document.createElement("div"),i.enterAnimation=s.enterAnimation||function(){var e=this;return WinJSContrib.UI.Animation.fadeIn(e.splashLoader,500)},i.exitAnimation=s.enterAnimation||function(){var e=this,s=WinJSContrib.UI.Animation.fadeOut(e.element.querySelector("#mcn-splashscreen-loader"),500),i=WinJSContrib.UI.Animation.fadeOut(e.element,500,{delay:200});return WinJS.Promise.join([s,i]).then(function(){e.element.style.display="none"})},i.isVisible=!1,WinJSContrib.UI.Application=WinJSContrib.UI.Application||{},WinJSContrib.UI.Application.splashscreen=i,i.element.className="mcn-splashscreen "+i.element.className,WinJSContrib.CrossPlatform&&WinJSContrib.CrossPlatform.crossPlatformClass&&WinJSContrib.CrossPlatform.crossPlatformClass(i.element),i.splashImageFile=s.image||"/images/splashscreen.png",i.element.innerHTML||(i.element.innerHTML=i.defaultSplashContent(s.text||"chargement en cours",s.description)),i.textElement=i.element.querySelector(".mcn-splashscreen-loader-text"),i.splashImage=i.element.querySelector("#mcn-splashscreen-image"),i.splashLoader=i.element.querySelector("#mcn-splashscreen-loader"),i.handleResizeBinded=i.handleResize.bind(i),i.handleDismissedBinded=i.handleDismissed.bind(i)},{defaultSplashContent:function(e){return WinJSContrib.CrossPlatform&&(WinJSContrib.CrossPlatform.isMobile.Android()||WinJSContrib.CrossPlatform.isMobile.iOS())?'<img id="mcn-splashscreen-image" src="'+this.splashImageFile+'" alt="Splash screen image" /><div id="mcn-splashscreen-loader" style="opacity: 0"><div class="cordova-ring"></div><div class="mcn-splashscreen-loader-text">'+(e||"")+"</div><div>":'<img id="mcn-splashscreen-image" src="'+this.splashImageFile+'" alt="Splash screen image" /><div id="mcn-splashscreen-loader" style="opacity: 0"><progress class="win-ring"></progress><div class="mcn-splashscreen-loader-text">'+(e||"")+"</div><div>"},handleResize:function(){this.setLocation()},handleDismissed:function(e){e.target.removeEventListener("dismissed",this.handleDismissedBinded)},init:function(e){var s=this;return WinJS.Promise.timeout().then(function(){e&&e.detail&&e.detail.splashScreen&&s.setLocation(e.detail.splashScreen),s.element.style.display=""})},show:function(e,s){var i=this;return s&&i.init(s),i.splashLoader.style.opacity=0,i.element.style.display="",i.element.style.opacity="",WinJSContrib.UI.appbarsDisable(),new WinJS.Promise(function(s,n){setImmediate(function(){window.addEventListener("resize",i.handleResizeBinded,!1),i.enterAnimation.bind(i)()}),WinJS.Promise.join([e,WinJS.Promise.timeout(200)]).done(function(){s()},function(){n()})})},setLocation:function(e){var s=this;e?(s.splashImage.style.position="absolute",s.splashImage.style.top=e.imageLocation.y+"px",s.splashImage.style.left=e.imageLocation.x+"px",s.splashImage.style.width=e.imageLocation.width+"px",s.splashImage.style.position="absolute",s.splashLoader.style.top=e.imageLocation.y+e.imageLocation.height+20+"px",s.splashLoader.style.left=e.imageLocation.x+"px"):(s.splashImage.style.position="",s.splashImage.style.top="",s.splashImage.style.left="",s.splashImage.style.height="",s.splashImage.style.width="",s.splashImage.style.position="",s.splashLoader.style.top="",s.splashLoader.style.left="",s.splashLoader.style.height="",s.splashLoader.style.width="")},hide:function(){var e=this;return WinJSContrib.UI.appbarsEnable(),window.removeEventListener("resize",e.handleResizeBinded),e.exitAnimation.bind(e)()}})})}();