/* 
 * WinJS Contrib v2.1.0.0
 * licensed under MIT license (see http://opensource.org/licenses/MIT)
 * sources available at https://github.com/gleborgne/winjscontrib
 */

!function(){"use strict";WinJS.Navigation;WinJS.Namespace.define("WinJSContrib.UI",{ExtendedSplash:WinJS.Class.define(function(e,i){var s=this;i=i||{},s.element=e||document.createElement("div"),s.enterAnimation=i.enterAnimation||function(){var e=this;return WinJSContrib.UI.Animation.fadeIn(e.splashLoader,{duration:500})},s.exitAnimation=i.enterAnimation||function(){var e=this,i=WinJSContrib.UI.Animation.fadeOut(e.element.querySelector("#mcn-splashscreen-loader"),{duration:500}),s=WinJSContrib.UI.Animation.fadeOut(e.element,{duration:500,delay:200});return WinJS.Promise.join([i,s]).then(function(){e.element.style.display="none"})},s.isVisible=!1,WinJSContrib.UI.Application=WinJSContrib.UI.Application||{},WinJSContrib.UI.Application.splashscreen=s,s.element.className="mcn-splashscreen "+s.element.className,WinJSContrib.CrossPlatform&&WinJSContrib.CrossPlatform.crossPlatformClass&&WinJSContrib.CrossPlatform.crossPlatformClass(s.element),s.splashImageFile=i.image||"/images/splashscreen.png",s.element.innerHTML||(s.element.innerHTML=s.defaultSplashContent(i.text||"chargement en cours",i.description)),s.textElement=s.element.querySelector(".mcn-splashscreen-loader-text"),s.splashImage=s.element.querySelector("#mcn-splashscreen-image"),s.splashLoader=s.element.querySelector("#mcn-splashscreen-loader"),s.handleResizeBinded=s.handleResize.bind(s),s.handleDismissedBinded=s.handleDismissed.bind(s)},{defaultSplashContent:function(e){return WinJSContrib.CrossPlatform&&(WinJSContrib.CrossPlatform.isMobile.Android()||WinJSContrib.CrossPlatform.isMobile.iOS())?'<img id="mcn-splashscreen-image" src="'+this.splashImageFile+'" alt="Splash screen image" /><div id="mcn-splashscreen-loader" style="opacity: 0"><div class="cordova-ring"></div><div class="mcn-splashscreen-loader-text">'+(e||"")+"</div><div>":'<img id="mcn-splashscreen-image" src="'+this.splashImageFile+'" alt="Splash screen image" /><div id="mcn-splashscreen-loader" style="opacity: 0"><progress class="win-ring"></progress><div class="mcn-splashscreen-loader-text">'+(e||"")+"</div><div>"},handleResize:function(){this.setLocation()},handleDismissed:function(e){e.target.removeEventListener("dismissed",this.handleDismissedBinded)},init:function(e){var i=this;return WinJS.Promise.timeout().then(function(){e&&e.detail&&e.detail.splashScreen&&i.setLocation(e.detail.splashScreen),i.element.style.display=""})},show:function(e,i){var s=this;return i&&s.init(i),s.splashLoader.style.opacity=0,s.element.style.display="",s.element.style.opacity="",WinJSContrib.UI.appbarsDisable(),new WinJS.Promise(function(i,n){setImmediate(function(){window.addEventListener("resize",s.handleResizeBinded,!1),s.enterAnimation.bind(s)()}),WinJS.Promise.join([e,WinJS.Promise.timeout(200)]).done(function(){i()},function(){n()})})},setLocation:function(e){var i=this;e&&e.imageLocation?(i.splashImage.style.position="absolute",i.splashImage.style.top=e.imageLocation.y+"px",i.splashImage.style.left=e.imageLocation.x+"px",i.splashImage.style.width=e.imageLocation.width+"px",i.splashImage.style.position="absolute",i.splashLoader.style.top=e.imageLocation.y+e.imageLocation.height+20+"px",i.splashLoader.style.left=e.imageLocation.x+"px"):(i.splashImage.style.position="",i.splashImage.style.top="",i.splashImage.style.left="",i.splashImage.style.height="",i.splashImage.style.width="",i.splashImage.style.position="",i.splashLoader.style.top="",i.splashLoader.style.left="",i.splashLoader.style.height="",i.splashLoader.style.width="")},hide:function(){var e=this;return WinJSContrib.UI.appbarsEnable(),window.removeEventListener("resize",e.handleResizeBinded),e.exitAnimation.bind(e)()}})})}();