var WinJSContrib=WinJSContrib||{};WinJSContrib.WinRT=WinJSContrib.WinRT||{},WinJSContrib.Alerts=WinJSContrib.Alerts||{},function(){WinJSContrib.WinRT.readProtocol=function(t){if(t.detail.kind===Windows.ApplicationModel.Activation.ActivationKind.protocol&&t.detail.uri){var n={action:void 0},i={},e=t.detail.uri.query;return"?"==e[0]&&(e=e.substr(1)),e&&e.split("&").forEach(function(t){var n=t.split("=");i[n[0]]=decodeURIComponent(n[1])}),n.protocol={action:t.detail.uri.host,args:i},n}},WinJSContrib.WinRT.isConnected=function(){var t=Windows.Networking.Connectivity.NetworkConnectivityLevel,n=Windows.Networking.Connectivity.NetworkInformation.getInternetConnectionProfile();if(null!==n){var i=n.getNetworkConnectivityLevel();return i===t.constrainedInternetAccess||i===t.internetAccess}return!1},WinJSContrib.WinRT.hasInternetAccess=function(){var t=Windows.Networking.Connectivity.NetworkConnectivityLevel,n=Windows.Networking.Connectivity.NetworkInformation.getInternetConnectionProfile();if(null!==n){var i=n.getNetworkConnectivityLevel();return i===t.internetAccess}return!1},WinJSContrib.WinRT.onInternetStatusChanged=function(t){var n=function(n){t(WinJSContrib.WinRT.hasInternetAccess())};return Windows.Networking.Connectivity.NetworkInformation.addEventListener("networkstatuschanged",n),function(){Windows.Networking.Connectivity.NetworkInformation.removeEventListener("networkstatuschanged",n)}},WinJSContrib.Alerts.messageBox=function(t,n){if(t){if(window.Windows){var i=new Windows.UI.Popups.MessageDialog(t.content);if(t.title&&(i.title=t.title),t.commands&&t.commands.forEach){if((WinJS.Utilities.isPhone||n)&&t.commands.length>2)return WinJS.Promise.wrapError("you must specify maximum 2 commands on WP platforms");t.commands.forEach(function(t,n){var e=new Windows.UI.Popups.UICommand;e.label=t.label,t.callback&&(e.invoked=t.callback),i.commands.append(e),t.isDefault&&(i.defaultCommandIndex=n)})}return i.showAsync()}return new WinJS.Promise(function(n){var i="";t.title&&(i=t.title);var e=[];t.commands&&t.commands.forEach?t.commands.forEach(function(t){e.push(t.label)}):e=["Ok"],navigator&&navigator.notification&&navigator.notification.confirm?navigator.notification.confirm(t.content,function(i){if(t.commands&&t.commands[i-1]&&t.commands[i-1].callback){var e=t.commands[i-1].callback();e&&e.then?e.then(function(){n(!0)}):n(!0)}else n(0!=i?!0:!1)},i,e):n(window.confirm(i)?!0:!1)})}return WinJS.Promise.wrapError("you must specify commands as an array of objects with properties text and callback such as {text: '', callback: function(c){}}")},WinJSContrib.Alerts.message=function(t,n){return WinJSContrib.Alerts.messageBox({title:t,content:n})},WinJSContrib.Alerts.confirm=function(t,n,i,e){return new WinJS.Promise(function(o){WinJSContrib.Alerts.messageBox({title:t,content:n,commands:[{label:i,callback:function(){o(!0)},isDefault:!0},{label:e,callback:function(){o(!1)}}]})})},WinJSContrib.Alerts.toastNotification=function(t){if(!window.Windows)throw"No notification plugin found";var n=Windows.UI.Notifications,i=t.template||(t.picture?n.ToastTemplateType.toastImageAndText01:n.ToastTemplateType.toastText01),e=n.ToastNotificationManager.getTemplateContent(i),o=e.getElementsByTagName("text"),a=e.getElementsByTagName("image");if(t.launch){var r=e.getElementsByTagName("toast");r[0].setAttribute("launch",JSON.stringify(t.launch))}o[0].appendChild(e.createTextNode(t.text)),t.text2&&o.length>1&&o[1].appendChild(e.createTextNode(t.text2)),t.text3&&o.length>1&&o[2].appendChild(e.createTextNode(t.text3)),t.picture&&a[0].setAttribute("src",t.picture);var c=new n.ToastNotification(e),s=n.ToastNotificationManager.createToastNotifier();s.show(c)},WinJSContrib.Alerts.toast=function(t,n){WinJSContrib.Alerts.toastNotification({text:t,picture:n})}}();