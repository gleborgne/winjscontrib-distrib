/* 
 * WinJS Contrib v2.0.1.0
 * licensed under MIT license (see http://opensource.org/licenses/MIT)
 * sources available at https://github.com/gleborgne/winjscontrib
 */

var WinJSContrib=WinJSContrib||{};WinJSContrib.WinRT=WinJSContrib.WinRT||{},WinJSContrib.WinRT.BgTask=WinJSContrib.WinRT.BgTask||{},function(){"use strict";function n(n){for(var i=Windows.ApplicationModel.Background,t=i.BackgroundTaskRegistration.allTasks.first(),e=t.hasCurrent;e;){var r=t.current.value;if(r.name===n)return r;e=t.moveNext()}return!1}function i(n){n.addEventListener("completed",function(i){WinJS.Application.queueEvent({type:"MCN.BackgroundTask.Completed",arg:i,task:n})}),n.addEventListener("progress",function(i){WinJS.Application.queueEvent({type:"MCN.BackgroundTask.Progress",arg:i,task:n})})}WinJSContrib.WinRT.BgTask.registerBackgroundTask=function(t,e,r,a){var o=n(e);if(o)return void i(o);var c=new Windows.ApplicationModel.Background.BackgroundTaskBuilder;c.name=e,c.taskEntryPoint=t,r.forEach(function(n){c.setTrigger(n)}),a&&a.length&&a.forEach(function(n){c.addCondition(n)});var s=c.register();i(s);var u=Windows.Storage.ApplicationData.current.localSettings;u.values.remove(e)},WinJSContrib.WinRT.BgTask.registerTimeTriggerBackgroundTask=function(n,i,t,e){try{Windows.ApplicationModel.Background.BackgroundExecutionManager.requestAccessAsync().done(function(r){(r===Windows.ApplicationModel.Background.BackgroundAccessStatus.allowedWithAlwaysOnRealTimeConnectivity||r===Windows.ApplicationModel.Background.BackgroundAccessStatus.allowedMayUseActiveRealTimeConnectivity)&&WinJSContrib.WinRT.BgTask.registerBackgroundTask(n,i,t,e)})}catch(r){}}}();