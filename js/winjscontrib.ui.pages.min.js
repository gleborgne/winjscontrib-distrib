/* 
 * WinJS Contrib v2.0.3.0
 * licensed under MIT license (see http://opensource.org/licenses/MIT)
 * sources available at https://github.com/gleborgne/winjscontrib
 */

var WinJSContrib;!function(e){var t;!function(t){var n;!function(){!function(t,n,r,i,o,s,a,u,c,l){"use strict";function f(e){var t=n.document.createElement("a");return t.href=e,t.href}function h(e){return n.document.location.href.toLowerCase()===e.toLowerCase()}function p(e,t){return t?(t.__proto__.hasOwnProperty("hasOwnProperty")||p(e,t.__proto__),r.Class.mix(e,t)):e}function d(e,t){return t?"function"==typeof t?(e.prototype._attachedConstructors||(e.prototype._attachedConstructors=[]),e.prototype._attachedConstructors.push(t),p(e,t.prototype)):"object"==typeof t?r.Class.mix(e,t):e:e}function m(i,c){var l=f(i).toLowerCase(),p=y[l];return i=f(i),p||(p=r.Class.define(function(e,t,r,c){var l=this;this._disposed=!1,this.element=e=e||n.document.createElement("div"),s.addClass(e,"win-disposable"),e.msSourceLocation=i,this.uri=i,this.selfhost=h(i),e.winControl=this,l.parentedComplete=c,s.addClass(e,"pagecontrol");var f=" uri='"+i+"'"+o._getProfilerMarkIdentifier(this.element);a("WinJS.UI.Pages:createPage"+f+",StartTM");var p=u.timeout().then(function(){return l.load(i)}),d=p.then(function(n){return l._attachedConstructors&&l._attachedConstructors.forEach(function(n){n.apply(l,[e,t])}),u.join({loadResult:n,initResult:l.init(e,t)})}).then(function(n){return l.render(e,t,n.loadResult)});this.elementReady=d.then(function(){return e}),this.renderComplete=d.then(function(){return l.process(e,t)}).then(function(){return l.processed(e,t)});var m=function(){r&&r(l),a("WinJS.UI.Pages:createPage"+f+",StopTM")};this.renderComplete.then(m,m),this.readyComplete=this.renderComplete.then(function(){return c}).then(function(){return l.ready(e,t),l}).then(null,function(e){return l.error?l.error(e):void 0})},P),p=r.Class.mix(p,WinJS.UI.DOMEventMixin),t.defaultPageMixins.forEach(function(e){var t=p.prototype.dispose;p=r.Class.mix(p,e),t&&e.hasOwnProperty("dispose")&&(p.prototype.dispose=function(){t.apply(this),e.dispose.apply(this)})}),e.UI.Pages.fragmentMixin(p),y[l]=p),p=d(p,c),p.selfhost=h(i),p}function v(e,t){var r=y[e];return r||(r=m(e)),t&&(r=d(r,t)),r.selfhost&&WinJS.Utilities.ready(function(){_(f(e),n.document.body)},!0),r}function _(e,t,n,r){var o=i.get(e),s=new o(t,n,null,r);return s.renderComplete.then(null,function(e){return u.wrapError({error:e,page:s})})}function g(e){var t=y[e];return t||(t=v(e)),t}function C(e){c.clearCache(f(e)),delete y[e.toLowerCase()]}var y=i._viewMap||{};t.defaultPageMixins=[{$:function(e){return $(e,this.element||this._element)},q:function(e){return this.element?this.element.querySelector(e):void 0},qAll:function(e){if(this.element){var t=this.element.querySelectorAll(e);t&&!t.forEach&&(t.forEach=function(e){for(var n=0;n<t.length;n++)e(t[n],n)})}}},{dispose:function(){this._promises&&(this.cancelPromises(),this._promises=null)},promises:{configurable:!0,get:function(){return this._promises||(this._promises=[]),this._promises}},addPromise:function(e){return this.promises.push(e),e},cancelPromises:function(){var e=this;if(e.promises)for(var t=0;t<e.promises.length;t++)e.promises[t]&&e.promises[t].cancel()}},{dispose:function(){this._eventTracker&&(this._eventTracker.dispose(),this._eventTracker=null)},eventTracker:{configurable:!0,get:function(){return this._eventTracker||(this._eventTracker=new e.UI.EventTracker),this._eventTracker}}}];var P={dispose:function(){this._disposed||(this._disposed=!0,s.disposeSubTree(this.element),this.element=null)},init:function(){},load:function(e){return this.selfhost?void 0:c.renderCopy(f(e))},process:function(e){return l.processAll(e)},processed:function(){},render:function(e,t,n){return this.selfhost||e.appendChild(n),e},ready:function(){}};t._corePages={get:i.get,render:i.render,define:i.define,_remove:i._remove,_viewMap:i._viewMap};var S={define:v,get:g,render:_,_remove:C,_viewMap:y},w=WinJS.UI.Pages;WinJS.Namespace._moduleDefine(t,null,S),w.get=S.get,w.define=S.define,w.render=S.render,w._remove=S._remove}(e.UI.Pages,window,WinJS,WinJS.UI.Pages,WinJS.Utilities,WinJS.Utilities,msWriteProfilerMark,WinJS.Promise,WinJS.UI.Fragments,WinJS.UI)}(n=t.Pages||(t.Pages={}))}(t=e.UI||(e.UI={}))}(WinJSContrib||(WinJSContrib={}));