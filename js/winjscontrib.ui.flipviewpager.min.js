/* 
 * WinJS Contrib v2.0.1.0
 * licensed under MIT license (see http://opensource.org/licenses/MIT)
 * sources available at https://github.com/gleborgne/winjscontrib
 */

!function(){"use strict";WinJS.Namespace.define("WinJSContrib.UI",{FlipViewPager:WinJS.Class.mix(WinJS.Class.define(function(i,e){this.element=i||document.createElement("DIV"),e=e||{},this.element.className="mcn-flipviewpager",this.element.winControl=this,this.element.classList.add("win-disposable"),this.isFlipping=!1,this.flipviewPageVisibilityChangeBinded=this.flipviewPageVisibilityChange.bind(this),this.pageSelectedBinded=this.pageSelected.bind(this),this.countChangedBinded=this.countChanged.bind(this),WinJS.UI.setOptions(this,e)},{flipView:{get:function(){return this._flipView},set:function(i){this.unregisterFlipViewEvents(),i?(this._flipView=i,i.winControl&&(this._flipView=i.winControl),this.registerFlipViewEvents(),this.initControl()):this._flipView=void 0}},initControl:function(){var i=this;this._flipView.count().done(function(e){i.initButtons(e)})},buttonClicked:function(i){if(this.isFlipping){var e=this._flipview.currentPage;radioButtons[e].checked=!0}else{var t=i.srcElement.getAttribute("value");this._flipView.currentPage=parseInt(t,10)}},countChanged:function(){this.initControl()},pageSelected:function(){this.isFlipping=!1;var i=this._flipView.currentPage,e=this.radioButtons[i];e?e.checked=!0:this.initControl()},flipviewPageVisibilityChange:function(i){i.detail.visible===!0&&(this.isFlipping=!0)},registerFlipViewEvents:function(){this._flipView&&(this._flipView.addEventListener("pagevisibilitychanged",this.flipviewPageVisibilityChangeBinded,!1),this._flipView.addEventListener("pageselected",this.pageSelectedBinded,!1),this._flipView.addEventListener("datasourcecountchanged",this.countChangedBinded,!1))},unregisterFlipViewEvents:function(){this._flipView&&(this._flipView.removeEventListener("pagevisibilitychanged",this.flipviewPageVisibilityChangeBinded),this._flipView.removeEventListener("pageselected",this.pageSelectedBinded),this._flipView.removeEventListener("datasourcecountchanged",this.countChangedBinded))},initButtons:function(i){this.radioButtons=[],this.element.innerHTML="";for(var e=0;i>e;++e){var t=document.createElement("input");t.setAttribute("type","radio"),t.setAttribute("name","flipviewPagerContextGroup"),t.setAttribute("value",e),t.setAttribute("aria-label",e+1+" of "+i),t.onclick=this.buttonClicked.bind(this),this.radioButtons.push(t),this.element.appendChild(t)}i>0&&(this.radioButtons[this._flipView.currentPage].checked=!0)},dispose:function(){this.unregisterFlipViewEvents(),WinJS.Utilities.disposeSubTree(this.element)}}),WinJS.UI.DOMEventMixin)})}();