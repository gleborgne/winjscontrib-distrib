/* 
 * WinJS Contrib v2.0.3.0
 * licensed under MIT license (see http://opensource.org/licenses/MIT)
 * sources available at https://github.com/gleborgne/winjscontrib
 */

!function(){"use strict";WinJS.Namespace.define("WinJSContrib.DataContainer",{LocalStorageContainer:WinJS.Class.define(function(e,t,o){this.key=e||"mcndatacontainer",this.options=t,this.parent=o,this.storageKey=o?o.storageKey+"."+this.key:this.key},{read:function(e){var t=this,o=t.storageKey+"#"+e,i=localStorage[o];return i?(i=JSON.parse(i),t.options.logger&&t.options.logger.debug("readed "+o)):t.options.logger&&t.options.logger.debug("reading empty "+o),WinJS.Promise.wrap(i)},save:function(e,t){var o=this;if(t){var i=JSON.stringify(t),r=o.storageKey+"#"+e;o.options.logger&&o.options.logger.debug("saving "+r),localStorage[r]=i}return WinJS.Promise.wrap()},remove:function(e){var t=this,o=t.storageKey+"#"+e;return localStorage.removeItem(o),t.options.logger&&t.options.logger.debug("removing "+o),WinJS.Promise.wrap()},list:function(){for(var e=Object.keys(localStorage),t=[],o=0;o<e.length;o++)-1!=e[o].indexOf(this.storageKey)&&t.push({displayName:e[o].replace(this.storageKey+"#","")});return WinJS.Promise.wrap(t)},child:function(e){if(this[e])return this[e];var t=new WinJSContrib.DataContainer.LocalStorageContainer(e,this.options,this);return this[e]=t,t}})})}();